# Height Mapping Configuration - Local Mapping (Robot-Centric)
# Uses ppl (Pipeline Library) format

# Mapper settings
mapper:
  map:
    width: 15.0
    height: 15.0
    resolution: 0.1
    frame_id: "map"

# Pipeline configuration
pipeline:
  enable_profiling: true
  profile_interval: 100
  stages:
    - MoveOrigin
    - VoxelFilter
    - PassthroughFilter
    - Raycasting
    - HeightEstimation
    - Inpainting

# Stage parameters
params:
  VoxelFilter:
    voxel_size: 0.05
    method: "centroid"

  PassthroughFilter:
    range_min: 0.5
    range_max: 20.0
    # z_min: -0.1
    # z_max: 2.0

  Raycasting:
    enabled: false
    endpoint_margin: 2
    ray_height_margin: 0.05
    vote_threshold: 10

  HeightEstimation:
    type: "kalman_filter"  # kalman_filter | welford | p2_quantile
    kalman:
      initial_variance: 0.05
      min_variance: 0.0001
      max_variance: 0.05

  Inpainting:
    enabled: true
    max_iterations: 3
    min_valid_neighbors: 2
