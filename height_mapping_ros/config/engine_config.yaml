# Height Mapping Core Engine Configuration
# This file contains ONLY core processing settings (no ROS dependencies)
# ROS-specific settings (topics, rates) are in the launch file

# Map configuration
map:
  width: 10.0        # meters
  height: 10.0       # meters
  resolution: 0.1    # meters per cell
  frame_id: "map"    # Frame ID for the map

# Engine behavior
engine:
  thread_safe: true
  auto_reset_on_error: false
  max_queue_size: 10
  enable_statistics: false

# Pipeline configuration
pipeline:
  # Which stages to enable
  stages:
    transform: true
    voxel_filter: true
    passthrough_filter: true
    height_estimation: true
    map_update: true

  # Filter parameters
  filters:
    # Voxel filter for downsampling
    voxel:
      size: 0.05  # meters

    # Passthrough filter bounds (in sensor frame)
    passthrough:
      x_min: -100.0
      x_max: 100.0
      y_min: -100.0
      y_max: 100.0
      z_min: -2.0
      z_max: 5.0

  # Transform stage
  transform:
    target_frame: "map"

  # Height estimation parameters
  estimator:
    type: "kalman"  # Options: "kalman", "mean", "moving_average"

    # Kalman filter parameters
    kalman:
      process_noise: 0.01
      measurement_noise: 0.1

    # Moving average parameters
    moving_average:
      window: 5

  # Map update configuration
  map_update:
    mode: "continuous"  # Options: "continuous", "threshold", "centered"
    threshold: 1.0      # For threshold mode (meters)
    robot_frame: "base_link"
    map_frame: "map"

  # Pipeline behavior
  behavior:
    stop_on_error: true
    enable_profiling: false